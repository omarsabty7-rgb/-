-- // تنظيف النسخ السابقة //
for _, v in pairs(game:GetService("CoreGui"):GetChildren()) do
    if v.Name == "EliteHubSystem" or v.Name == "EliteMainHub" then v:Destroy() end
end

local CorrectKey = "ELITE-KEY-2026"
local DiscordLink = "https://discord.gg/yz5yADqe"

-- // واجهة نظام المفاتيح //
local KeySystemGui = Instance.new("ScreenGui", game:GetService("CoreGui"))
KeySystemGui.Name = "EliteHubSystem"
local KeyFrame = Instance.new("Frame", KeySystemGui)
KeyFrame.Size, KeyFrame.Position = UDim2.new(0, 260, 0, 150), UDim2.new(0.5, -130, 0.5, -75)
KeyFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
Instance.new("UICorner", KeyFrame)

local KeyInput = Instance.new("TextBox", KeyFrame)
KeyInput.PlaceholderText = "ENTER KEY..."
KeyInput.Size, KeyInput.Position = UDim2.new(0.8, 0, 0, 35), UDim2.new(0.1, 0, 0.3, 0)
KeyInput.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
KeyInput.TextColor3 = Color3.new(1,1,1)

local Submit = Instance.new("TextButton", KeyFrame)
Submit.Text = "SUBMIT"
Submit.Size, Submit.Position = UDim2.new(0.8, 0, 0, 35), UDim2.new(0.1, 0, 0.65, 0)
Submit.BackgroundColor3 = Color3.fromRGB(200, 40, 40)
Submit.TextColor3 = Color3.new(1,1,1)

-- // السكريبت الأساسي المطور //
local function loadMainHub()
    local ScreenGui = Instance.new("ScreenGui", game:GetService("CoreGui"))
    ScreenGui.Name = "EliteMainHub"
    local Main = Instance.new("Frame", ScreenGui)
    Main.Size, Main.Position = UDim2.new(0, 280, 0, 500), UDim2.new(0.1, 0, 0.1, 0)
    Main.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
    Main.Active, Main.Draggable = true, true
    Instance.new("UICorner", Main)

    local Title = Instance.new("TextLabel", Main)
    Title.Text = "ELITE HUB V8 | UNIVERSAL"
    Title.Size = UDim2.new(1, 0, 0, 40)
    Title.BackgroundColor3 = Color3.fromRGB(30,30,30)
    Title.TextColor3 = Color3.new(1,1,1)

    local function CreateToggle(name, pos, callback)
        local btn = Instance.new("TextButton", Main)
        btn.Text = name .. " [OFF]"
        btn.Size, btn.Position = UDim2.new(0.9, 0, 0, 35), pos
        btn.BackgroundColor3 = Color3.fromRGB(40,40,40)
        btn.TextColor3 = Color3.new(1,1,1)
        Instance.new("UICorner", btn)
        local act = false
        btn.MouseButton1Click:Connect(function()
            act = not act
            btn.Text = name .. (act and " [ON]" or " [OFF]")
            btn.BackgroundColor3 = act and Color3.fromRGB(200, 0, 0) or Color3.fromRGB(40,40,40)
            callback(act)
        end)
    end

    -- 1. UNIVERSAL NO RECOIL (إلغاء اهتزاز الكاميرا)
    CreateToggle("UNIVERSAL NO RECOIL", UDim2.new(0.05, 0, 0.12, 0), function(s)
        _G.NoRecoil = s
        if s then
            local old; old = hookmetamethod(game, "__namecall", function(self, ...)
                local method = getnamecallmethod()
                if _G.NoRecoil and (method == "FireServer" or method == "InvokeServer") then
                    local args = {...}
                    -- فحص إذا كان الأمر يتعلق بالارتداد
                    if tostring(self):lower():find("recoil") or tostring(self):lower():find("shake") then return nil end
                end
                return old(self, ...)
            end)
        end
    end)

    -- 2. SEMI-GOD MODE (Respawn Protection)
    CreateToggle("GOD MODE (GLITCH)", UDim2.new(0.05, 0, 0.22, 0), function(s)
        if s then
            local char = game.Players.LocalPlayer.Character
            if char and char:FindFirstChild("Humanoid") then
                char.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Dead, false)
                print("God Mode Active")
            end
        end
    end)

    -- 3. SMART AIMBOT (يعمل على الأقرب في الشاشة)
    CreateToggle("UNIVERSAL AIMBOT", UDim2.new(0.05, 0, 0.32, 0), function(s)
        _G.Aimbot = s
        task.spawn(function()
            while _G.Aimbot do
                local target = nil
                local shortest = math.huge
                for _, p in pairs(game.Players:GetPlayers()) do
                    if p ~= game.Players.LocalPlayer and p.Team ~= game.Players.LocalPlayer.Team and p.Character and p.Character:FindFirstChild("HumanoidRootPart") then
                        local pos, vis = workspace.CurrentCamera:WorldToViewportPoint(p.Character.HumanoidRootPart.Position)
                        if vis then
                            local dist = (Vector2.new(pos.X, pos.Y) - Vector2.new(workspace.CurrentCamera.ViewportSize.X/2, workspace.CurrentCamera.ViewportSize.Y/2)).Magnitude
                            if dist < shortest then target = p; shortest = dist end
                        end
                    end
                end
                if target then
                    workspace.CurrentCamera.CFrame = CFrame.new(workspace.CurrentCamera.CFrame.Position, target.Character.HumanoidRootPart.Position)
                end
                task.wait()
            end
        end)
    end)

    -- 4. ESP (Boxes)
    CreateToggle("ESP BOXES", UDim2.new(0.05, 0, 0.42, 0), function(s)
        _G.ESP = s
        while _G.ESP do
            for _, p in pairs(game.Players:GetPlayers()) do
                if p ~= game.Players.LocalPlayer and p.Character then
                    if not p.Character:FindFirstChild("Highlight") then
                        local h = Instance.new("Highlight", p.Character)
                        h.FillTransparency = 0.5
                        h.FillColor = (p.Team == game.Players.LocalPlayer.Team) and Color3.new(0,1,0) or Color3.new(1,0,0)
                    end
                end
            end
            task.wait(1)
        end
        if not s then
            for _, p in pairs(game.Players:GetPlayers()) do
                if p.Character and p.Character:FindFirstChild("Highlight") then p.Character.Highlight:Destroy() end
            end
        end
    end)

    -- 5. SPEED & JUMP (Safe Version)
    CreateToggle("MAX SPEED", UDim2.new(0.05, 0, 0.52, 0), function(s)
        _G.Speed = s
        game:GetService("RunService").Heartbeat:Connect(function()
            if _G.Speed and game.Players.LocalPlayer.Character:FindFirstChild("Humanoid") then
                game.Players.LocalPlayer.Character.Humanoid.WalkSpeed = 100
            end
        end)
    end)
end

-- // تشغيل نظام المفتاح //
Submit.MouseButton1Click:Connect(function()
    if KeyInput.Text == CorrectKey then
        KeySystemGui:Destroy()
        loadMainHub()
    else
        Submit.Text = "WRONG!"
        task.wait(1)
        Submit.Text = "SUBMIT"
    end
end)
