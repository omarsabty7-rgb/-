-- // إعدادات نظام المفاتيح //
local CorrectKey = "ELITE-KEY-2026" 
local DiscordLink = "https://discord.gg/yz5yADqe"

local KeyGui = Instance.new("ScreenGui")
local KeyFrame = Instance.new("Frame")
local KeyInput = Instance.new("TextBox")
local SubmitBtn = Instance.new("TextButton")
local GetKeyBtn = Instance.new("TextButton")

KeyGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
KeyFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
KeyFrame.Position = UDim2.new(0.5, -135, 0.5, -90)
KeyFrame.Size = UDim2.new(0, 270, 0, 180)
KeyFrame.Active = true
KeyFrame.Draggable = true
Instance.new("UICorner", KeyFrame)

KeyInput.Parent = KeyFrame
KeyInput.PlaceholderText = "Enter Key Here..."
KeyInput.Position = UDim2.new(0.1, 0, 0.3, 0)
KeyInput.Size = UDim2.new(0.8, 0, 0, 35)
KeyInput.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
KeyInput.TextColor3 = Color3.new(1, 1, 1)
Instance.new("UICorner", KeyInput)

SubmitBtn.Parent = KeyFrame
SubmitBtn.Text = "SUBMIT"
SubmitBtn.Position = UDim2.new(0.1, 0, 0.6, 0)
SubmitBtn.Size = UDim2.new(0.35, 0, 0, 35)
SubmitBtn.BackgroundColor3 = Color3.fromRGB(220, 40, 40)
SubmitBtn.TextColor3 = Color3.new(1, 1, 1)
Instance.new("UICorner", SubmitBtn)

GetKeyBtn.Parent = KeyFrame
GetKeyBtn.Text = "GET KEY"
GetKeyBtn.Position = UDim2.new(0.55, 0, 0.6, 0)
GetKeyBtn.Size = UDim2.new(0.35, 0, 0, 35)
GetKeyBtn.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
GetKeyBtn.TextColor3 = Color3.new(1, 1, 1)
Instance.new("UICorner", GetKeyBtn)

-- // وظيفة تحميل السكريبت الأساسي المطور //
local function loadMainHub()
    local ScreenGui = Instance.new("ScreenGui")
    local MainFrame = Instance.new("Frame")
    local RunService = game:GetService("RunService")
    local UserInputService = game:GetService("UserInputService")
    local LocalPlayer = game.Players.LocalPlayer

    -- القيم الافتراضية
    local AimbotEnabled, Flying, SpeedEnabled, JumpEnabled = false, false, false, false
    local ESPEnabled, GodModeEnabled, NoRecoilEnabled = false, false, false
    local WalkSpeedValue, JumpPowerValue, FlySpeedValue, SmoothnessValue = 100, 150, 100, 0.1

    ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")
    MainFrame.Parent = ScreenGui
    MainFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
    MainFrame.Position = UDim2.new(0.1, 0, 0.1, 0)
    MainFrame.Size = UDim2.new(0, 280, 0, 600)
    MainFrame.Active, MainFrame.Draggable = true, true
    Instance.new("UICorner", MainFrame)

    local function CreateToggleButton(name, pos, callback, isFullWidth)
        local active = false
        local btn = Instance.new("TextButton", MainFrame)
        btn.Text = name .. ": [OFF]"
        btn.Position = pos
        btn.Size = isFullWidth and UDim2.new(0.9, 0, 0, 32) or UDim2.new(0.6, 0, 0, 32)
        btn.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
        btn.TextColor3 = Color3.new(1,1,1)
        Instance.new("UICorner", btn)
        btn.MouseButton1Click:Connect(function()
            active = not active
            btn.Text = active and name .. ": [ON]" or name .. ": [OFF]"
            btn.BackgroundColor3 = active and Color3.fromRGB(220, 40, 40) or Color3.fromRGB(45, 45, 45)
            callback(active)
        end)
    end

    local function CreateValueInput(pos, defaultValue, callback)
        local input = Instance.new("TextBox", MainFrame)
        input.Text = tostring(defaultValue)
        input.Position = pos
        input.Size = UDim2.new(0.2, 0, 0, 32)
        input.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
        input.TextColor3 = Color3.fromRGB(0, 255, 0)
        Instance.new("UICorner", input)
        input.FocusLost:Connect(function() callback(tonumber(input.Text) or defaultValue) end)
    end

    -- الأزرار الأساسية
    CreateToggleButton("SPEED", UDim2.new(0.05, 0, 0.08, 0), function(s) SpeedEnabled = s end)
    CreateValueInput(UDim2.new(0.7, 0, 0.08, 0), WalkSpeedValue, function(v) WalkSpeedValue = v end)

    CreateToggleButton("JUMP", UDim2.new(0.05, 0, 0.15, 0), function(s) JumpEnabled = s end)
    CreateValueInput(UDim2.new(0.7, 0, 0.15, 0), JumpPowerValue, function(v) JumpPowerValue = v end)

    CreateToggleButton("FLY (Space/Shift)", UDim2.new(0.05, 0, 0.22, 0), function(s)
        Flying = s
        local root = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
        if Flying and root then
            local bv = Instance.new("BodyVelocity", root)
            bv.MaxForce = Vector3.new(math.huge, math.huge, math.huge)
            task.spawn(function()
                while Flying do
                    local cam = workspace.CurrentCamera.CFrame
                    local newVel = Vector3.new(0,0,0)
                    if UserInputService:IsKeyDown(Enum.KeyCode.W) then newVel = newVel + cam.LookVector end
                    if UserInputService:IsKeyDown(Enum.KeyCode.S) then newVel = newVel - cam.LookVector end
                    if UserInputService:IsKeyDown(Enum.KeyCode.D) then newVel = newVel + cam.RightVector end
                    if UserInputService:IsKeyDown(Enum.KeyCode.A) then newVel = newVel - cam.RightVector end
                    if UserInputService:IsKeyDown(Enum.KeyCode.Space) then newVel = newVel + Vector3.new(0,1,0) end
                    if UserInputService:IsKeyDown(Enum.KeyCode.LeftShift) then newVel = newVel - Vector3.new(0,1,0) end
                    bv.Velocity = newVel * FlySpeedValue
                    task.wait()
                end
                bv:Destroy()
            end)
        end
    end)
    CreateValueInput(UDim2.new(0.7, 0, 0.22, 0), FlySpeedValue, function(v) FlySpeedValue = v end)

    CreateToggleButton("AIMBOT (ENEMIES)", UDim2.new(0.05, 0, 0.29, 0), function(s) AimbotEnabled = s end)
    CreateValueInput(UDim2.new(0.7, 0, 0.29, 0), SmoothnessValue, function(v) SmoothnessValue = v end)

    -- // تحسين God Mode //
    CreateToggleButton("GOD MODE (BETA)", UDim2.new(0.05, 0, 0.36, 0), function(s) 
        GodModeEnabled = s 
        if s then
            local char = LocalPlayer.Character
            if char and char:FindFirstChild("Humanoid") then
                char.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Dead, false)
            end
        end
    end, true)

    -- // تحسين No Recoil //
    CreateToggleButton("NO RECOIL", UDim2.new(0.05, 0, 0.43, 0), function(s) 
        NoRecoilEnabled = s
        task.spawn(function()
            while NoRecoilEnabled do
                pcall(function()
                    for _, v in pairs(game:GetDescendants()) do
                        if v:IsA("ValueBase") and (v.Name:find("Recoil") or v.Name:find("Spread")) then
                            v.Value = 0
                        end
                    end
                end)
                task.wait(1)
            end
        end)
    end, true)

    -- // إصلاح الـ ESP (بدون شاشة بيضاء) //
    CreateToggleButton("SMART ESP", UDim2.new(0.05, 0, 0.50, 0), function(s) 
        ESPEnabled = s 
        if not s then
            for _, p in pairs(game.Players:GetPlayers()) do
                if p.Character and p.Character:FindFirstChild("ESPHightlight") then
                    p.Character.ESPHightlight:Destroy()
                end
            end
        end
    end, true)

    RunService.RenderStepped:Connect(function()
        if ESPEnabled then
            for _, p in pairs(game.Players:GetPlayers()) do
                if p ~= LocalPlayer and p.Character and p.Character:FindFirstChild("HumanoidRootPart") then
                    local h = p.Character:FindFirstChild("ESPHightlight")
                    if not h then
                        h = Instance.new("Highlight")
                        h.Name = "ESPHightlight"
                        h.Parent = p.Character
                        h.Adornee = p.Character
                        h.FillTransparency = 0.5
                    end
                    h.FillColor = (p.Team == LocalPlayer.Team) and Color3.new(0,0,1) or Color3.new(1,0,0)
                end
            end
        end
        -- Aimbot
        if AimbotEnabled then
            local target, dist = nil, 1000
            for _, p in pairs(game.Players:GetPlayers()) do
                if p ~= LocalPlayer and p.Team ~= LocalPlayer.Team and p.Character and p.Character:FindFirstChild("HumanoidRootPart") then
                    local d = (p.Character.HumanoidRootPart.Position - LocalPlayer.Character.HumanoidRootPart.Position).Magnitude
                    if d < dist then target = p dist = d end
                end
            end
            if target then
                workspace.CurrentCamera.CFrame = workspace.CurrentCamera.CFrame:Lerp(CFrame.new(workspace.CurrentCamera.CFrame.Position, target.Character.HumanoidRootPart.Position), SmoothnessValue)
            end
        end
    end)

    RunService.Heartbeat:Connect(function()
        local char = LocalPlayer.Character
        if char and char:FindFirstChild("Humanoid") then
            if SpeedEnabled then char.Humanoid.WalkSpeed = WalkSpeedValue end
            if JumpEnabled then char.Humanoid.JumpPower = JumpPowerValue char.Humanoid.UseJumpPower = true end
        end
    end)
end

-- // منطق أزرار التحقق //
SubmitBtn.MouseButton1Click:Connect(function()
    if KeyInput.Text == CorrectKey then
        KeyGui:Destroy()
        loadMainHub()
    else
        SubmitBtn.Text = "WRONG!"
        task.wait(1)
        SubmitBtn.Text = "SUBMIT"
    end
end)

GetKeyBtn.MouseButton1Click:Connect(function() setclipboard(DiscordLink) end)
